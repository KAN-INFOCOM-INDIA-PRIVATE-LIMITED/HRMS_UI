<!-- Header -->
<header class="main-header" id="header">
  <nav class="navbar navbar-expand-lg navbar-light" id="navbar">
    <!-- Sidebar toggle button -->
    <button id="sidebar-toggler" class="sidebar-toggle">
      <!-- <button id="sidebar-toggler" (click)="toggleCollapse()" class="sidebar-toggle"> -->

      <span class="sr-only">Toggle navigation</span>
    </button>

    <!-- <span class="page-title">navbar customization</span> -->

    <div class="navbar-right ">

      <!-- search form -->
      <div class="search-form">
        <form action="index.html" method="get">
          <div class="input-group input-group-sm" id="input-group-search">
            <input type="text" autocomplete="off" name="query" id="search-input" class="form-control"
              placeholder="Search Employee" />
            <div class="input-group-append">
              <button class="btn" type="button">/</button>
            </div>
          </div>
        </form>
        <ul class="dropdown-menu dropdown-menu-search">

          <li class="nav-item">
            <a class="nav-link" href="index.html">Morbi leo risus</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Dapibus ac facilisis in</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Porta ac consectetur ac</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Vestibulum at eros</a>
          </li>

        </ul>

      </div>

      <ul class="nav navbar-nav">
        
        <!-- <li class="custom-dropdown">
          <a class="offcanvas-toggler active custom-dropdown-toggler" data-offcanvas="contact-off" href="javascript:">
            <i class="mdi mdi-contacts icon"></i>
          </a>
        </li> -->

        <!-- <li class="dropdown user-menu">
          <button class="dropdown-toggle nav-link" (click)="toggleNotification()" href="javascript:void(0)" 
            data-target="#notificationDropdownMenu" data-toggle="show">
            <i class="mdi mdi-bell-outline icon"></i>
            <span class="notification-count">{{notificationCount}}</span>
          </button>
          <ul id="notificationDropdownMenu" class="dropdown-menu dropdown-menu-right" [ngClass]="{'show': isNotification}">
            <div *ngIf="notifications.length > 0">
              <div class="notification-item" *ngFor="let notification of notifications" (click)="showNotificationDetails(notification)">
                <div class="notification-header">
                  <span>{{ notification.message }}</span>
                  <span class="notification-timestamp">
                    {{ notification.createdDate | date: 'dd/MM/yyyy, h:mm a' }}
                  </span>
                </div>
                <div class="notification-details" *ngIf="selectedNotification === notification">
                  <p><strong>UserID:</strong> {{ notification.notificationUserID }}</p>
                  <p><strong>Module:</strong> {{ notification.module }}</p>
                  <button class="btn btn-sm btn-secondary close-details-button" (click)="clearSelectedNotification($event)">
                    Close
                  </button>
                </div>
              </div>
            </div>
          </ul>
        </li> -->
        
        <!-- <li class="dropdown user-menu">
          <button class="dropdown-toggle nav-link" (click)="toggleNotification()" href="javascript:void(0)" 
            data-target="#notificationDropdownMenu" data-toggle="show">
            <i class="mdi mdi-bell-outline icon"></i>
            <span class="notification-count">{{notificationCount}}</span>
          </button>
          <ul id="notificationDropdownMenu" class="dropdown-menu dropdown-menu-right" [ngClass]="{'show': isNotification}">
            <div *ngIf="notifications.length > 0">
              <div class="notification-item" *ngFor="let notification of notifications" (click)="showNotificationDetails(notification)">
                <div class="notification-header">
                  <span>{{ notification.message }}</span>
                  <span class="notification-timestamp">
                    {{ notification.createdDate | date: 'dd/MM/yyyy, h:mm a' }}
                  </span>
                </div>
                <div class="notification-details" *ngIf="selectedNotification === notification">
                  <p><strong>UserID:</strong> {{ notification.notificationUserID }}</p>
                  <p><strong>Module:</strong> {{ notification.module }}</p>
                  <button class="btn btn-sm btn-secondary close-details-button" (click)="clearSelectedNotification($event)">
                    Close
                  </button>
                </div>
              </div>
            </div>
          </ul>
        </li> -->
        
        <li class="dropdown user-menu">
          <button class="dropdown-toggle nav-link" (click)="toggleNotification()" href="javascript:void(0)" 
            data-target="#notificationDropdownMenu" data-toggle="show">
            <i class="mdi mdi-bell-outline icon"></i>
            <span class="notification-count">{{notificationCount}}</span>
          </button>
          <ul id="notificationDropdownMenu" class="dropdown-menu" [ngClass]="{'show': isNotification}">
            <div *ngIf="notifications.length > 0">
              <div class="notification-item" 
                   *ngFor="let notification of notifications" 
                   (click)="showNotificationDetails(notification)"
                   [ngClass]="{'active': selectedNotification === notification}">
                <div class="notification-header">
                  <span>{{ notification.message }}</span>
                  <span class="notification-timestamp">
                    {{ notification.createdDate | date: 'dd/MM/yyyy, h:mm a' }}
                  </span>
                </div>
                <div class="notification-details" *ngIf="selectedNotification === notification">
                  <p><strong>UserID:</strong> {{ notification.notificationUserID }}</p>
                  <p><strong>Module:</strong> {{ notification.module }}</p>
                  <button class="btn btn-sm btn-secondary close-details-button" (click)="clearSelectedNotification($event)">
                    Close
                  </button>
                </div>
              </div>
            </div>
          </ul>
        </li>
        
        
        <!-- notification -->




        <!-- <li class="custom-dropdown">
            <button class="notify-toggler custom-dropdown-toggler" (click)="openNotificationModal()" href="javascript:void(0)">
              <i class="mdi mdi-bell-outline icon"></i>
              <span class="badge badge-xs rounded-circle">{{ notificationCount }}</span>
            </button>
          </li> -->

        <!-- <div class="header-right">
          <button class="notification-icon" (click)="openNotificationModal()">
            <i class="fa fa-bell"></i> 
            <span class="badge badge-xs rounded-circle">{{ notificationCount }}</span>
          </button>
        </div> -->

        <!-- Other header HTML code -->




        <!-- User Account -->
        <li class="dropdown user-menu">
          <button class="dropdown-toggle nav-link" (click)="toggleCollapse()" href="javascript:void(0)"
            data-target="#loginDropdownMenu" data-toggle="show">

            <img src="../assets/images/user/user-xs-01.jpg" class="user-image rounded-circle" alt="User Image" />
            <span class="d-none d-lg-inline-block">{{user!=null && user.first_name!=null?user.first_name+"
              "+user.last_name:'' | uppercase}}</span>
          </button>
          <ul id="loginDropdownMenu" class="dropdown-menu dropdown-menu-right" [ngClass]="{'show': isCollapsed}">
            <li>
              <a class="dropdown-link-item" routerLink="/employeeData">
                <i class="mdi mdi-account-outline"></i>
                <span class="nav-text">My Profile</span>
              </a>
            </li>
            <li>
              <a class="link-item" style="justify-content: normal;" (click)="openChangePasswordModal()"
                [ngStyle]="{'cursor': 'pointer'}">
                <i class="fas fa-lock icon"></i>
                <span class="nav-text">Change Password</span>
              </a>
            </li>

            <li class="dropdown-footer">
              <a class="dropdown-link-item" style="justify-content: normal;" (click)="logout()"> <i
                  class="mdi mdi-logout"></i> Log Out </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>


</header>
<app-notifications *ngIf="notificationsOpen"></app-notifications>

<!-- Modal content -->
<ng-template #changePasswordModal let-modal>
  <div class="modal-body">
    <app-change-password (closeChangePassword)="modal.dismiss()"></app-change-password>
  </div>
</ng-template>